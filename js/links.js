var links = {
  "Top": [
       {
      "title": "Search", 
      "links" : [ 
        {"title":"Google", "url" : "http://www.google.com"},
        {"title":"Bing", "url" : "http://www.bing.com"},
        {"title":"Yahoo", "url" : "http://www.yahoo.com"},
        {"title":"Ask", "url": "http://www.ask.com"},
        {"title":"Duckduckgo", "url" : "http://www.duckduckgo.com"}
      ]},
      { 
      "title": "Knowledge", 
      "links" : [ 
        {"title":"Wikipedia", "url" : "http://www.wikipedia.org"},
        {"title":"Khan Academy", "url" : "http://www.khanacademy.org"},
        {"title":"Gutenberg", "url" : "http://www.gutenberg.org"}, 
        {"title":"Archive", "url" : "http://www.archive.org"},
        {"title":"TED","url":"http://www.ted.com"}
      ]},
      {
      "title": "News", 
      "links" : [
        {"title":"Yahoo News", "url" : "http://news.yahoo.com"},
        {"title":"Google News", "url" : "http://news.google.com"},
        {"title":"Huffington Post", "url" : "http://huffingtonpost.com"},
        {"title":"NY Times", "url" : "http://www.nytimes.com"},
        {"title":"CNN", "url" : "http://www.cnn.com"}
      ]},
      {
      "title": "Music", 
      "links" : [ 
        {"title":"Pandora", "url" : "http://www.pandora.com"},
        {"title":"Yahoo! Music", "url" : "http://www.music.yahoo.com"},
        {"title":"Google Play", "url" : "http://play.google.com`"},
        {"title":"SoundCloud", "url" : "http://www.soundcloud.com"},
        {"title":"Spotify", "url" : "http://www.spotify.com"}
      ]},
       {
      "title": "Networks", 
      "links" : [
        {"title":"Facebook", "url" : "http://www.facebook.com"},
        {"title":"Twitter", "url" : "http://www.twitter.com"},
        {"title":"LinkedIn", "url" : "http://www.linkedIn.com"},
        {"title":"Pinterest", "url" : "http://www.pinterest.com"},
        {"title":"Google+", "url":"http://plus.google.com"}
      ]},
       {
      "title": "Video", 
      "links" : [
        {"title":"YouTube", "url" : "http://www.youtube.com"},
        {"title":"NetFlix", "url" : "http://www.netflix.com"},
        {"title":"Vimeo", "url" : "http://www.vimeo.com"},
        {"title":"Twitch", "url" : "http://www.twitch.tv"},
        {"title":"Daily Motion", "url":"http://www.vine.co"}
      ]}],

    "Games": [
       {
      "title": "Stores", 
      "links" : [ 
        {"title":"Steam", "url" : "http://www.steampowered.com"},
        {"title":"itch.io", "url" : "http://www.itch.io"},
        {"title":"Desura", "url" : "http://www.desura.com"},
        {"title":"App Store", "url": "https://itunes.apple.com/us/genre/ios-games/id6014?mt=8"},
        {"title":"Play Store", "url" : "https://play.google.com/store/apps/category/GAME"}
      ]},
      { 
      "title": "News", 
      "links" : [ 
        {"title":"IGN", "url" : "http://www.wikipedia.org"},
        {"title":"GameFAQs", "url" : "http://www.khanacademy.org"},
        {"title":"GameSpot", "url" : "http://www.gutenberg.org"}, 
        {"title":"Kotaku", "url" : "http://www.archive.org"},
        {"title":"N4G","url":"http://www.ted.com"}
      ]},
      {
      "title": "Lets Play", 
      "links" : [
        {"title":"Twitch", "url" : "http://www.twitch.tv"},
        {"title":"/r/letsplay", "url" : "http://www.reddit.com/r/letsplay/"},
        {"title":"LPArchive", "url" : "http://www.lparchive.org"},
        {"title":"Youtube", "url" : "https://www.youtube.com/results?search_query=letsplay"},
        {"title":"Twitter", "url" : "https://twitter.com/search?q=%23letsplay&src=typd"}
      ]},
      {
      "title": "Rating", 
      "links" : [ 
        {"title":"MetaCritic", "url" : "http://www.metacritic.com/game"},
        {"title":"IGN", "url" : "http://www.ign.com"},
        {"title":"GameSpot", "url" : "http://www.gamespot.com"},
        {"title":"JoyStiq", "url" : "http://www.joystiq.com"},
        {"title":"GameRankins", "url" : "http://www.gamerankins.com"}
      ]},
       {
      "title": "Development", 
      "links" : [
        {"title":"Portals", "url" : "https://github.com/ellisonleao/magictools#blogs-and-portals"},
        {"title":"Tools", "url" : "https://github.com/ellisonleao/magictools"},
        {"title":"Assets", "url" : "https://github.com/ellisonleao/magictools#assetsplaceholders"},
        {"title":"Jams", "url" : "http://compohub.net"},
        {"title":"Books", "url":"https://github.com/ellisonleao/magictools#books"}
      ]},
       {
      "title": "Web Games", 
      "links" : [
        {"title":"Newgrounds", "url" : "http://www.newgrounds.com"},
        {"title":"Kongregate", "url" : "http://www.kongregate.com"},
        {"title":"Adult Swim", "url" : "http://games.adultswim.com"},
        {"title":"Armor Games", "url" : "http://www.armorgames.com"},
        {"title":"Addicting Games", "url":"http://www.addictinggames.com"}
      ]}],

    "Fun": [
       {
      "title": "Fun Sites", 
      "links" : [ 
        {"title":"theCHIVE", "url" : "http://www.thechive.com/"},
        {"title":"Cracked", "url" : "http://www.cracked.com/"},
        {"title":"Break", "url" : "http://www.break.com"},
        {"title":"Funny or Die", "url": "http://www.funnyordie.com/"},
        {"title":"9GAG", "url" : "http://www.9gag.com"}
      ]},
      { 
      "title": "Comics", 
      "links" : [ 
        {"title":"xkcd", "url" : "http://www.xkcd.com"},
        {"title":"SMBC", "url" : "http://www.smbc-comics.com"},
        {"title":"Oatmeal", "url" : "http://www.theoatmeal.com/comics"}, 
        {"title":"PhDComics", "url" : "http://www.phdcomics.com/comics.php"},
        {"title":"Poorly Drawn Lines","url":"http://poorlydrawnlines.com/comic/"}
      ]},
      {
      "title": "Reddit", 
      "links" : [
        {"title":"/r/funny", "url" : "http://www.reddit.com/r/funny"},
        {"title":"/r/reactiongifs", "url" : "http://www.reddit.com/r/reactiongifs/"},
        {"title":"/r/humor", "url" : "http://www.reddit.com/r/humor"},
        {"title":"/r/jokes", "url" : "http://www.reddit.com/r/jokes"},
        {"title":"/r/lol", "url" : "http://www.reddit.com/r/lol"}
      ]},
      {
      "title": "Meme", 
      "links" : [ 
        {"title":"Quick Meme", "url" : "http://www.quickmeme.com/"},
        {"title":"Meme Center", "url" : "http://www.memecenter.com/top/daily"},
        {"title":"Know Your Meme", "url" : "http://www.knowyourmeme.com"},
        {"title":"Meme Generator", "url" : "https://imgflip.com/memegenerator"},
        {"title":"9GAG Meme", "url" : "http://9gag.com/meme"}
      ]},
       {
      "title": "Development", 
      "links" : [
        {"title":"Portals", "url" : "https://github.com/ellisonleao/magictools#blogs-and-portals"},
        {"title":"Tools", "url" : "https://github.com/ellisonleao/magictools"},
        {"title":"Assets", "url" : "https://github.com/ellisonleao/magictools#assetsplaceholders"},
        {"title":"Jams", "url" : "http://compohub.net"},
        {"title":"Books", "url":"https://github.com/ellisonleao/magictools#books"}
      ]},
       {
      "title": "Web Games", 
      "links" : [
        {"title":"Newgrounds", "url" : "http://www.newgrounds.com"},
        {"title":"Kongregate", "url" : "http://www.kongregate.com"},
        {"title":"Adult Swim", "url" : "http://games.adultswim.com"},
        {"title":"Armor Games", "url" : "http://www.armorgames.com"},
        {"title":"Addicting Games", "url":"http://www.addictinggames.com"}
      ]}]


}

var topics = {
  "topics":[{"name":"Top"}, {"name":"Games"}, {"name":"Fun"}]
}

var loadCell = function(number, entries) {
  var template = $('#cell1').html();
  console.log("template is " + template);
  Mustache.parse(template);

  var rendered = Mustache.render(template, entries);
  var target = "#cell" + number + "target";
  $(target).html(rendered)
  console.log("rendering to target " + target);
}

var renderTopics = function() {
  var template = $("#topicTemplate").html();
  Mustache.parse(template)
  var rendered = Mustache.render(template, topics);
  $("#maptitle").html(rendered);
}

var changeMap = function(topic) {
  for(var i = 0; i < links[topic].length; i++) {
    loadCell(i, links[topic][i]);
    console.log(i, topic, i, links[topic][i]);
  }
}

var initMap = function() {
  renderTopics();
  changeMap("Top");
}

